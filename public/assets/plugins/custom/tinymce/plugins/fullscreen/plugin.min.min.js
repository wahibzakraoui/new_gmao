!function(n){"use strict";var t,e,r,o=function(n){var t=n;return{get:function(){return t},set:function(n){t=n}}},u=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=function(){},c=function(n){return function(){return n}},l=c(!1),a=c(!0),f=function(){return s},s=(t=function(n){return n.isNone()},{fold:function(n,t){return n()},is:l,isSome:l,isNone:a,getOr:r=function(n){return n},getOrThunk:e=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:r,orThunk:e,map:f,each:i,bind:f,exists:l,forall:a,filter:f,equals:t,equals_:t,toArray:function(){return[]},toString:c("none()")}),d=function(n){var t=c(n),e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:a,isNone:l,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return d(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?o:s},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(l,(function(t){return e(n,t)}))}};return o},m={some:d,none:f,from:function(n){return null==n?s:d(n)}},h=function(){return n=function(n){n.unbind()},t=o(m.none()),e=function(){t.get().each(n)},{clear:function(){e(),t.set(m.none())},isSet:function(){return t.get().isSome()},set:function(n){e(),t.set(m.some(n))}};var n,t,e},p=function(n){return function(t){return r=typeof(e=t),(null===e?"null":"object"==r&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":r)===n;var e,r}},g=function(n){return function(t){return typeof t===n}},v=p("string"),y=p("array"),w=g("boolean"),b=function(n){return!(null===(t=n)||void 0===t);var t},S=g("function"),T=g("number"),x=Array.prototype.push,A=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var u=n[o];r[o]=t(u,o)}return r},E=function(n,t){for(var e=0,r=n.length;e<r;e++)t(n[e],e)},O=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var u=n[r];t(u,r)&&e.push(u)}return e},C=Object.keys,k=function(n){return void 0!==n.style&&S(n.style.getPropertyValue)},N=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:c(n)}},F=N,M=(void 0!==n.window?n.window:Function("return this;")(),function(n){return function(t){return t.dom().nodeType===n}}),P=M(1),D=M(3),L=M(9),q=M(11),V=function(n,t){var e=n.dom();if(1!==e.nodeType)return!1;var r=e;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},H=function(n){return A(n.dom().childNodes,F)},W=S(n.Element.prototype.attachShadow)&&S(n.Node.prototype.getRootNode),j=c(W),z=W?function(n){return F(n.dom().getRootNode())}:function(n){return L(n)?n:F(n.dom().ownerDocument)},B=function(n){return F(n.dom().host)},I=function(n){return b(n.dom().shadowRoot)},R=function(n){var t,e,r=D(n)?n.dom().parentNode:n.dom();return null!=r&&null!==r.ownerDocument&&function(n){var t=z(n);return q(t)?m.some(t):m.none()}(F(r)).fold((function(){return r.ownerDocument.body.contains(r)}),(t=R,e=B,function(n){return t(e(n))}))},U=function(n,t){var e=n.dom().getAttribute(t);return null===e?void 0:e},_=function(n,t){n.dom().removeAttribute(t)},K=function(t,e){var r=t.dom();!function(n,t){for(var e=C(n),r=0,o=e.length;r<o;r++){var u=e[r];t(n[u],u)}}(e,(function(t,e){!function(t,e,r){if(!v(r))throw n.console.error("Invalid call to CSS.set. Property ",e,":: Value ",r,":: Element ",t),new Error("CSS value must be a string: "+r);k(t)&&t.style.setProperty(e,r)}(r,e,t)}))},X=function(n){var t,e,r,o,u,i=F(function(n){if(j()&&b(n.target)){var t=F(n.target);if(P(t)&&I(F(n.target))&&n.composed&&n.composedPath){var e=n.composedPath();if(e)return 0===(r=e).length?m.none():m.some(r[0])}}var r;return m.from(n.target)}(n).getOr(n.target)),l=function(){return n.stopPropagation()},a=function(){return n.preventDefault()},f=(t=a,e=l,function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,n))});return r=i,o=n.clientX,u=n.clientY,{target:c(r),x:c(o),y:c(u),stop:l,prevent:a,kill:f,raw:c(n)}},Y=function(n,t){return{left:c(n),top:c(t),translate:function(e,r){return Y(n+e,t+r)}}},G=Y,J=function(t){var e=void 0===t?n.window:t;return m.from(e.visualViewport)},Q=function(n,t,e,r){return{x:n,y:t,width:e,height:r,right:n+e,bottom:t+r}},Z=function(t){var e,r,o,u,i=void 0===t?n.window:t,c=i.document,l=(o=(r=void 0!==(e=F(c))?e.dom():n.document).body.scrollLeft||r.documentElement.scrollLeft,u=r.body.scrollTop||r.documentElement.scrollTop,G(o,u));return J(i).fold((function(){var n=i.document.documentElement,t=n.clientWidth,e=n.clientHeight;return Q(l.left(),l.top(),t,e)}),(function(n){return Q(Math.max(n.pageLeft,l.left()),Math.max(n.pageTop,l.top()),n.width,n.height)}))},$=function(n,t,e){return J(e).map((function(e){var r=function(n){return t(X(n))};return e.addEventListener(n,r),{unbind:function(){return e.removeEventListener(n,r)}}})).getOrThunk((function(){return{unbind:i}}))},nn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),tn=tinymce.util.Tools.resolve("tinymce.Env"),en=tinymce.util.Tools.resolve("tinymce.util.Delay"),rn=function(n,t){n.fire("FullscreenStateChanged",{state:t})},on=function(n,t,e){return O(function(n,t){for(var e=S(t)?t:l,r=n.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var u=r.parentNode,i=F(u);if(o.push(i),!0===e(i))break;r=u}return o}(n,e),t)},un=function(n,t){return e=function(n){return V(n,t)},O(function(n){var t;return t=n,m.from(t.dom().parentNode).map(F).map(H).map((function(t){return O(t,(function(t){return e=t,n.dom()!==e.dom();var e}))})).getOr([])}(n),e);var e},cn="data-ephox-mobile-fullscreen-style",ln="position:absolute!important;",an="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",fn=tn.os.isAndroid(),sn=function(t){var e,r,o,u,i=(r="background-color",o=(e=t).dom(),""!==(u=n.window.getComputedStyle(o).getPropertyValue(r))||R(e)?u:function(n,t){return k(n)?n.style.getPropertyValue(t):""}(o,r));return void 0!==i&&""!==i?"background-color:"+i+"!important":"background-color:rgb(255,255,255)!important;"},dn=function(t,e,r){var o=function(e){return function(r){var o=U(r,"style"),u=void 0===o?"no-styles":o.trim();u!==e&&(function(t,e,r){!function(t,e,r){if(!(v(r)||w(r)||T(r)))throw n.console.error("Invalid call to Attr.set. Key ",e,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,r+"")}(t.dom(),e,r)}(r,cn,u),K(r,t.parseStyle(e)))}},u=("*",on(e,(function(n){return V(n,"*")}),undefined)),i=function(n,t){return function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!y(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);x.apply(t,n[e])}return t}(A(n,t))}(u,(function(n){return un(n,"*:not(.tox-silver-sink)")})),c=sn(r);E(i,o("display:none!important;")),E(u,o(ln+an+c)),o((!0===fn?"":ln)+an+c)(e)},mn=nn.DOM,hn=J().fold((function(){return{bind:i,unbind:i}}),(function(t){var e,r=(e=o(m.none()),{clear:function(){e.set(m.none())},set:function(n){e.set(m.some(n))},isSet:function(){return e.get().isSome()},on:function(n){e.get().each(n)}}),u=h(),i=h(),c=en.throttle((function(){n.document.body.scrollTop=0,n.document.documentElement.scrollTop=0,n.window.requestAnimationFrame((function(){r.on((function(n){return K(n,{top:t.offsetTop+"px",left:t.offsetLeft+"px",height:t.height+"px",width:t.width+"px"})}))}))}),50);return{bind:function(n){r.set(n),c(),u.set($("resize",c)),i.set($("scroll",c))},unbind:function(){r.on((function(){u.clear(),i.clear()})),r.clear()}}})),pn=function(t,e){var r,o,u=n.document.body,i=n.document.documentElement,c=t.getContainer(),l=F(c),a=e.get(),f=F(t.getBody()),s=tn.deviceType.isTouch(),d=c.style,m=t.iframeElement.style,h=function(){var e,r;s&&(e=t.dom,r=function(t){return e=t,1!==(r=o=n.document).nodeType&&9!==r.nodeType&&11!==r.nodeType||0===r.childElementCount?[]:A(o.querySelectorAll(e),F);var e,r,o}("["+cn+"]"),E(r,(function(n){var t=U(n,cn);"no-styles"!==t?K(n,e.parseStyle(t)):_(n,"style"),_(n,cn)}))),mn.removeClass(u,"tox-fullscreen"),mn.removeClass(i,"tox-fullscreen"),mn.removeClass(c,"tox-fullscreen"),hn.unbind()};if(a)m.width=a.iframeWidth,m.height=a.iframeHeight,d.width=a.containerWidth,d.height=a.containerHeight,d.top=a.containerTop,d.left=a.containerLeft,r=a.scrollPos,n.window.scrollTo(r.x,r.y),e.set(null),rn(t,!1),h(),t.off("remove",h);else{var p={scrollPos:{x:(o=Z(n.window)).x,y:o.y},containerWidth:d.width,containerHeight:d.height,containerTop:d.top,containerLeft:d.left,iframeWidth:m.width,iframeHeight:m.height};s&&dn(t.dom,l,f),m.width=m.height="100%",d.width=d.height="",mn.addClass(u,"tox-fullscreen"),mn.addClass(i,"tox-fullscreen"),mn.addClass(c,"tox-fullscreen"),hn.bind(l),t.on("remove",h),e.set(p),rn(t,!0)}},gn=function(n,t){return function(e){e.setActive(null!==t.get());var r=function(n){return e.setActive(n.state)};return n.on("FullscreenStateChanged",r),function(){return n.off("FullscreenStateChanged",r)}}};u.add("fullscreen",(function(n){var t,e,r,u,i=o(null);return n.inline||(e=i,(t=n).addCommand("mceFullScreen",(function(){pn(t,e)})),u=i,(r=n).ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:function(){return r.execCommand("mceFullScreen")},onSetup:gn(r,u)}),r.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:function(){return r.execCommand("mceFullScreen")},onSetup:gn(r,u)}),n.addShortcut("Meta+Shift+F","","mceFullScreen")),function(n){return{isFullscreen:function(){return null!==n.get()}}}(i)}))}(window);